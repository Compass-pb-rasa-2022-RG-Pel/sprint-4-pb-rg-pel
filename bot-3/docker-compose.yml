version: '3'
services:
  bot:
    build:
      context: .
      dockerfile: bot.dockerfile
    container_name: rasa
    networks:
      - all
    ports:
      - 5005:5056
    volumes:
      - ./:/app
    public: true
    command:
      - run
      - --enable-api
      - --cors
      - "*"
      - -p 5056

  server-bot:
    build:
      context: .
      dockerfile: server.dockerfile
    image: rasa-action:latest
    container_name: actions
    networks:
      - all
    ports:
      - "5055:5055"
    volumes:
      - "./actions:/app/actions"
    
  # mongodb:
  #   image: mongo
  #   ports:
  #     - 27017:27017
  #   volumes:
  #     - action

  web:
      build:
        context: ./webchat
        dockerfile: web.dockerfile
      image: webchat
      container_name: webchat-app
      depends_on:
        - "bot"
      networks: 
        - all
      ports: 
        - 8080:8080

networks:
  all:
    driver: bridge
  